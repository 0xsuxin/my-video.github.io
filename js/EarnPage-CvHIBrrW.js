var t=(t,a,e)=>new Promise(((l,n)=>{var s=t=>{try{i(e.next(t))}catch(a){n(a)}},r=t=>{try{i(e.throw(t))}catch(a){n(a)}},i=t=>t.done?l(t.value):Promise.resolve(t.value).then(s,r);i((e=e.apply(t,a)).next())}));import{_ as a}from"./calendar_icon-DPvMFugm.js";import{g as e,_ as l}from"./index-MjaGMYEZ.js";import{e as n,c as s}from"./customToast-CG7dT_y2.js";import{j as r,r as i,l as c,A as o,E as d,G as y,L as u,u as k,z as h,C as p,o as m,F as x,B as g,K as v,N as A,a as w,P as _,e as T,n as P,k as C}from"./vue-vendor-BPs1j0Jh.js";import{s as f,a as B,c as D}from"./vant-DsOUqIe7.js";import{f as I}from"./timeFormat-DgkpV5ud.js";import{C as N}from"./vue-content-loader.es-CxvjfQlB.js";const X={class:"task_comp_container"},Q={class:"task_left_box"},M=["src"],O={class:"task_info"},b={class:"task_name"},L={class:"task_points"},G={class:"point_num"},j={key:2,class:"handle_btn btn_timer"},E={key:3,class:"handle_btn btn_complete"},R=l(r({__name:"TaskComp",props:{taskType:{},taskTitle:{},taskPoint:{},taskBtnType:{},adState:{default:()=>({})}},emits:["onClaimPoint","onReloadData"],setup(l,{expose:s,emit:r}){const p=i(0),m=r;let x=null;const g=t=>{if("ad"===l.taskType){const{max_times:a=0,opt_count:e=0}=l.adState;return`${t} (${a-e}/${a})`}return t},v=()=>{"claim"===l.taskBtnType?m("onClaimPoint",4):"go"===l.taskBtnType&&("ad"==l.taskType?A():f("TODO 跳转"))},A=()=>t(this,null,(function*(){B({type:"loading",duration:0,loadingType:"spinner"});try{yield n.getWatchAd({params:{type:1}}),D(),m("onReloadData")}catch(t){console.log(t),D()}})),w=t=>{let a="";return a=e("group"===t?"aircraft_icon":`${t}_icon`),a};return s({handleInterval:()=>{"time"===l.taskBtnType&&(p.value=l.adState.cd,null!==x&&(clearInterval(x),x=null),x=window.setInterval((()=>{p.value>1?p.value--:(window.clearInterval(x),x=null,m("onReloadData","adEnd"))}),1e3))}}),c((()=>{window.clearInterval(x),x=null})),(t,e)=>(h(),o("div",X,[d("div",Q,[d("img",{src:w(t.taskType),alt:"",class:"task_icon"},null,8,M),d("div",O,[d("div",b,y(g(t.taskTitle)),1),d("div",L,[e[0]||(e[0]=d("img",{src:a,alt:"",class:"pre_icon"},null,-1)),d("div",G,"+"+y(t.taskPoint),1)])])]),"go"===t.taskBtnType?(h(),o("div",{key:0,class:"handle_btn btn_go",onClick:v},"GO")):u("",!0),"claim"===t.taskBtnType?(h(),o("div",{key:1,class:"handle_btn btn_claim",onClick:v},"Claim")):u("",!0),"time"===t.taskBtnType?(h(),o("div",j,y(k(p))+"s",1)):u("",!0),"complete"===t.taskBtnType?(h(),o("div",E,e[1]||(e[1]=[d("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHIAAABfCAMAAAADMWOnAAAANlBMVEUAAACQkJCPj4+Pj4+QkJCPj4+QkJCPj4+QkJCQkJCQkJCPj4+Pj4+Pj4+RkZGPj4+QkJCQkJAqyuD+AAAAEXRSTlMA3yBgnxCQcO+/z0AwgH9Qr/1DXPkAAAG7SURBVGje7ZrNbsMwDIPlpP531+r9X3aX7RBAGiILxOqm3zmX0CTBuKX3YmcRwhEDS9wIxxdLhI1gbCyyE46b/JKE48EinXAYvIMNCNI78kveSQDrnXh4aPWAPM8EZHHv0CXK9WUCQgdWD0i7QLkqAUl0YPWAXGF9jM/6+GXxck1XKFc5IO3wzOre+YeA5M/6+GH1gNQLlOsC6yO2INHiee8Uq3cyiyRkQCqLPHwB6RPClA1Vrrq0FRmQOn+ccbJcY1HOYzog09dfIQLLNSnHiVof+pFwNqhjLdfOImUA10eaOM5dL1ePtMm8PrL3s4l34Pq4s1J8wPXRbEl5Grxj7HdOwPWRWaYD10fVkmJdH35pqxIQ3Tt+aTNwnj9ZZpwKyKAJYtGOE3c52FkmAed5OlF8hvXh6feyWdeHX9pmLle/tAl39xHDn8U3EJ92g7WkWNeHv4SqdX34+52zdX34+51H0gMCkjaYA+KXVvcOSlo9IAhpdRLy511rQPwlBPOO3u+wgOj9rq8PnLT4y8FuCAhMWvzFcmwo7+gMY0DwJdQIQTV5B9Tv+NvzbChXuLSZUGyFX+VPdXMB+QaoWMshOLw1PgAAAABJRU5ErkJggg==",alt:"",class:"complete_btn"},null,-1)]))):u("",!0)]))}}),[["__scopeId","data-v-239830f0"]]),S={class:"calendar_comp_box"},J={class:"calendar_day"},W={class:"add_points"},Y={key:1,class:"calendar_comp_default calendar_comp_complete"},F={class:"calendar_day"},H=l(r({__name:"CalendarComp",props:{calendarData:{},sortIndex:{},currentClaim:{}},setup:t=>(t,e)=>(h(),o("div",S,[t.sortIndex>=t.currentClaim?(h(),o("div",{key:0,class:p(["calendar_comp_default",t.currentClaim===t.sortIndex?"current_active":""])},[d("div",J,"Day"+y(t.sortIndex),1),d("div",W,"+"+y(t.calendarData),1),e[0]||(e[0]=d("img",{src:a,alt:"",class:"calendar_icon"},null,-1))],2)):(h(),o("div",Y,[d("div",F,"Day "+y(t.sortIndex),1),e[1]||(e[1]=d("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABKCAYAAAA/i5OkAAADH0lEQVR4Xu2b0XGjQBBENwSHQAgOQSE4BDI4ZyBlYGegEByCQ3AIG8KF0MeAr0rXRtLe0AsC5lXxI9u90FrPNIOUUhAsAYBf3XGeeBxZN0i9uQ00tKwdpN7gzE45+GLdIPXmtuyUk4a1d09nyhM0u/fM2kHqDT6yUw4yYvf+xEwho7y8snaQeoPP7JSDzLpB6s19YaectKwdJFksi8Y2BiKW1cNMgWb3vrN2kHSNDbF7f2KmkFFeWtYOUm/wBzvlIGLZGNA1tmfWDlLEsqpAM28wGtbePWYKNLv3xNpB0sUy1g1SxLLqdMZ8sVMO4jHQGNDFsoa1gxSxrCrQxLKM2L0/MVPIKC/xGGgMRCyrR2fMMzvlpGXtIEVjqwoiltXDTIFm955YO0i9wW/slIMM1e7FkBPPgqNh7bmxc4CGlrXddGIHVnfyydpzg+GNnoo+lnWi77yKk8UCOXSNTf8YCMPHNhXTJuPA+nMATWOrF8ugC+a5O55YvyYYvk+hoGFtKd0Cr7yik3o7gcDaYlm30Cev7GSWeoxHbWzXwLAjfvMZODCNhvWVmD4v6qRl7apAVyqscVarx9D8ty0TL21hPhMnb6ytALpY1rD2LNjC0JQK48D6U4Gmsc3WjEeB7qP10nqMLT0GguZTiIak1kHX2GZJOXeB7st5xuSLwtpiWQnQDYSMA+uXAt3ubVl7caAbCGU4o9v3305l2cZ2DWhLxQfr3wNrj2UlQFsqiusx1jZvmAJ0paI4umFLsawE6GbHd2+lseXGdg0Ms2PVXd7NW2lsMZaVAN1AyHhhfcNe5190on8MNAfQDYRG6zE0je0xY1kJ0A6E/rmVhiaWjb5xqwLaUnH81rQ3LtPPPJzodNcJdKXCOGCvje0a0JaKzC84afk8Vw10HV+BZDT6cEB3lzeVhs9tE0A7EPKy3lhWArQDof8lY6u79xIsVypaPpdNgmVKxXZiWQmYv1SMzjM2TXfRJ3ahEttubLeAbnZ8i4bX3Q128dDd5Y1x4jV3B7QDoUsy9rx7L4F2IPSXltfZLdCXin3FshKgLRUN6z8ifwDySQP7QRt3jwAAAABJRU5ErkJggg==",alt:"",class:"complete_icon"},null,-1))]))]))}),[["__scopeId","data-v-7bc0a43c"]]),V={class:"sign_in_container"},K={class:"calendar_box"},U={key:1,class:"claim_btn countdown"},q=l(r({__name:"SignInComp",props:{signData:{}},emits:["onClaimPoint","onReloadData"],setup(t,{expose:a,emit:e}){const l=e;let n=null;const s=i("00:00:00"),r=()=>{l("onClaimPoint",1)};return m((()=>{null!==n&&(clearInterval(n),n=null)})),a({handleInterval:()=>{s.value=I(t.signData.cd),null!==n&&(clearInterval(n),n=null);let a=t.signData.cd;n=setInterval((()=>{a>1?(a--,s.value=I(a)):(clearInterval(n),n=null,l("onReloadData","signEnd"))}),1e3)}}),(t,a)=>{const e=H;return h(),o("div",V,[d("div",K,[(h(!0),o(x,null,g(t.signData.points_cfg,((a,l)=>(h(),v(e,{key:l,currentClaim:t.signData.cur,sortIndex:l+1,calendarData:a},null,8,["currentClaim","sortIndex","calendarData"])))),128))]),0===t.signData.cd?(h(),o("div",{key:0,class:"claim_btn",onClick:r},"Claim")):u("",!0),t.signData.cd>0?(h(),o("div",U,y(k(s)),1)):u("",!0)])}}}),[["__scopeId","data-v-6b8d862c"]]),z=r({__name:"SignInSkeleton",setup:t=>(t,a)=>(h(),v(k(N),{viewBox:"0 0 908 383",animate:"",primaryColor:"#353535",secondaryColor:"#858585",secondaryOpacity:.5},{default:A((()=>a[0]||(a[0]=[d("rect",{x:"25",y:"32",rx:"5",ry:"5",width:"71",height:"20"},null,-1),d("rect",{x:"35",y:"90",rx:"5",ry:"5",width:"48",height:"20"},null,-1),d("circle",{cx:"61",cy:"152",r:"24"},null,-1),d("rect",{x:"156",y:"32",rx:"5",ry:"5",width:"71",height:"20"},null,-1),d("rect",{x:"166",y:"90",rx:"5",ry:"5",width:"48",height:"20"},null,-1),d("circle",{cx:"192",cy:"152",r:"24"},null,-1),d("rect",{x:"286",y:"32",rx:"5",ry:"5",width:"71",height:"20"},null,-1),d("rect",{x:"296",y:"90",rx:"5",ry:"5",width:"48",height:"20"},null,-1),d("circle",{cx:"322",cy:"152",r:"24"},null,-1),d("rect",{x:"417",y:"32",rx:"5",ry:"5",width:"71",height:"20"},null,-1),d("rect",{x:"427",y:"90",rx:"5",ry:"5",width:"48",height:"20"},null,-1),d("circle",{cx:"454",cy:"152",r:"24"},null,-1),d("rect",{x:"548",y:"32",rx:"5",ry:"5",width:"71",height:"20"},null,-1),d("rect",{x:"558",y:"90",rx:"5",ry:"5",width:"48",height:"20"},null,-1),d("circle",{cx:"584",cy:"152",r:"24"},null,-1),d("rect",{x:"680",y:"32",rx:"5",ry:"5",width:"71",height:"20"},null,-1),d("rect",{x:"690",y:"90",rx:"5",ry:"5",width:"48",height:"20"},null,-1),d("circle",{cx:"715",cy:"152",r:"24"},null,-1),d("rect",{x:"810",y:"32",rx:"5",ry:"5",width:"71",height:"20"},null,-1),d("rect",{x:"820",y:"90",rx:"5",ry:"5",width:"48",height:"20"},null,-1),d("circle",{cx:"846",cy:"152",r:"24"},null,-1),d("rect",{x:"0",y:"248",rx:"20",ry:"20",width:"908",height:"135"},null,-1)]))),_:1}))}),Z=r({__name:"TaskCompSkeleton",props:{taskNum:{default:3}},setup:t=>(t,a)=>(h(),v(k(N),{viewBox:"0 0 908 "+(4==+t.taskNum?856:1==+t.taskNum?177:634),animate:"",primaryColor:"#353535",secondaryColor:"#858585",secondaryOpacity:.5},{default:A((()=>[a[15]||(a[15]=d("rect",{x:"32",y:"59",rx:"10",ry:"10",width:"72",height:"72"},null,-1)),a[16]||(a[16]=d("rect",{x:"128",y:"48.5",rx:"10",ry:"10",width:"289",height:"47"},null,-1)),a[17]||(a[17]=d("rect",{x:"202",y:"114",rx:"5",ry:"5",width:"89",height:"27"},null,-1)),a[18]||(a[18]=d("rect",{x:"686",y:"45",rx:"10",ry:"10",width:"190",height:"100"},null,-1)),a[19]||(a[19]=d("circle",{cx:"166",cy:"128",r:"24"},null,-1)),1!==t.taskNum?(h(),o(x,{key:0},[a[5]||(a[5]=d("rect",{x:"32",y:"281",rx:"10",ry:"10",width:"72",height:"72"},null,-1)),a[6]||(a[6]=d("rect",{x:"128",y:"260",rx:"10",ry:"10",width:"289",height:"47"},null,-1)),a[7]||(a[7]=d("rect",{x:"202",y:"336",rx:"5",ry:"5",width:"89",height:"27"},null,-1)),a[8]||(a[8]=d("rect",{x:"686",y:"267",rx:"10",ry:"10",width:"190",height:"100"},null,-1)),a[9]||(a[9]=d("circle",{cx:"166",cy:"350",r:"24"},null,-1)),a[10]||(a[10]=d("rect",{x:"32",y:"503",rx:"10",ry:"10",width:"72",height:"72"},null,-1)),a[11]||(a[11]=d("rect",{x:"128",y:"482",rx:"10",ry:"10",width:"289",height:"47"},null,-1)),a[12]||(a[12]=d("rect",{x:"202",y:"558",rx:"5",ry:"5",width:"89",height:"27"},null,-1)),a[13]||(a[13]=d("rect",{x:"686",y:"489",rx:"10",ry:"10",width:"190",height:"100"},null,-1)),a[14]||(a[14]=d("circle",{cx:"166",cy:"571",r:"24"},null,-1)),4!==t.taskNum?(h(),o(x,{key:0},[a[0]||(a[0]=d("rect",{x:"32",y:"725",rx:"10",ry:"10",width:"72",height:"72"},null,-1)),a[1]||(a[1]=d("rect",{x:"128",y:"715",rx:"10",ry:"10",width:"289",height:"47"},null,-1)),a[2]||(a[2]=d("rect",{x:"202",y:"780",rx:"5",ry:"5",width:"89",height:"27"},null,-1)),a[3]||(a[3]=d("rect",{x:"686",y:"711",rx:"10",ry:"10",width:"190",height:"100"},null,-1)),a[4]||(a[4]=d("circle",{cx:"166",cy:"794",r:"24"},null,-1))],64)):u("",!0)],64)):u("",!0)])),_:1},8,["viewBox"]))}),$={class:"earn_wrapper"},tt={class:"task_list"},at={class:"task_module"},et={class:"task_module"},lt={class:"task_module"},nt=l(r({__name:"EarnPage",setup(a){const e=i({}),l=i({}),r=i({}),c=w({x:"go",ad:"go",aircraft:"go",top:"go",mail:"go",share:"go",group:"go",instagram:"go"}),y=i(0),u=_("taskCompRef"),p=i(null),m=i(!1);T((()=>{g()}));const g=()=>t(this,null,(function*(){const t=yield n.getEarnData(),{ad_state:a,daily_state:s,base_state:i}=t;e.value=a,r.value=i,l.value=s,yield P((()=>{m.value||(m.value=!0)})),A(),f()})),A=()=>{const{followx:t,joinc:a}=r.value;c.x=I(t),c.aircraft=I(a),c.ad=N(),X(),P((()=>{var t;null==(t=u.value)||t.handleInterval()}))},f=()=>{var t;l.value.cd>0&&(null==(t=p.value)||t.handleInterval())},I=t=>{switch(t){case 0:default:return"go";case 1:return"claim";case 2:return"complete"}},N=()=>{let t;const{opt_count:a,max_times:l,award_count:n,cd:s}=e.value;return t=n===a&&a===l?"complete":n<a?"claim":a<l&&0===s?"go":"time",t},X=()=>{const{award_count:t,points_cfg:a}=e.value;y.value=a[t]||0},Q=a=>t(this,null,(function*(){try{B({type:"loading",duration:0,loadingType:"spinner"});const t=yield n.claimPoint({type:a});D(),t.awards>0&&(yield g(),s.success(t.awards))}catch(t){D(),s.fail(),console.log(t)}})),M=t=>{"signEnd"===t?l.value.cd=0:"adEnd"===t&&(e.value.cd=0),g()};return(t,a)=>(h(),o("div",$,[k(m)?(h(),v(q,{key:1,ref_key:"signComRef",ref:p,signData:k(l),onOnClaimPoint:Q,onOnReloadData:M},null,8,["signData"])):(h(),v(z,{key:0})),d("div",tt,[d("div",at,[a[0]||(a[0]=d("div",{class:"task_title"},"Basic Task",-1)),k(m)?(h(),o(x,{key:1},[C(R,{taskType:"x",taskTitle:"Follow us  X",taskBtnType:k(c).x,taskPoint:k(r).xawd},null,8,["taskBtnType","taskPoint"]),C(R,{taskType:"instagram",taskTitle:"Follow us Instagram",taskBtnType:k(c).instagram,taskPoint:"0"},null,8,["taskBtnType"]),C(R,{taskType:"aircraft",taskTitle:"Join our channel",taskBtnType:k(c).aircraft,taskPoint:k(r).cawd},null,8,["taskBtnType","taskPoint"]),C(R,{taskType:"aircraft",taskTitle:"Join our group",taskBtnType:k(c).group,taskPoint:k(r).cawd},null,8,["taskBtnType","taskPoint"])],64)):(h(),v(Z,{key:0,taskNum:"4"}))]),d("div",et,[a[1]||(a[1]=d("div",{class:"task_title"},"Daily Task",-1)),k(m)?(h(),o(x,{key:1},[C(R,{taskType:"ad",ref_key:"taskCompRef",ref:u,taskTitle:"Watch an Ad",onOnReloadData:M,onOnClaimPoint:Q,adState:k(e),taskBtnType:k(c).ad,taskPoint:k(y)},null,8,["adState","taskBtnType","taskPoint"]),C(R,{taskType:"top",taskTitle:"Top up",taskBtnType:k(c).top,taskPoint:"0"},null,8,["taskBtnType"]),C(R,{taskType:"mail",taskTitle:"Daily Invite",taskBtnType:k(c).mail,taskPoint:"0"},null,8,["taskBtnType"])],64)):(h(),v(Z,{key:0,taskNum:"3"}))]),d("div",lt,[a[2]||(a[2]=d("div",{class:"task_title"},"Social Media",-1)),k(m)?(h(),v(R,{key:1,taskType:"share",taskTitle:"RT Twitter",taskBtnType:"go",taskPoint:"0"})):(h(),v(Z,{key:0,taskNum:"1"}))])])]))}}),[["__scopeId","data-v-02926bca"]]);export{nt as default};
